MikuMikuEffect用キーイング発光フィルタ Ver.3.0

製作：そぼろ

特定の色の部分をキーイングした上で、その部分を発光している感じにする
エフェクトフィルタです。
光源として作用するわけではない点に注意してください

個別のオブジェクトに作用するのではなく、「画面上の色」によってすべてが決まります
キーカラーが他のモデルにも使われていたりすると、余分なところも光ることがあります

舞力介入PのGaussian.fxをベースにさせていただきました
調整用パラメータは先頭に集めたので適宜変更してください


●更新履歴

Ver.3.0
・キーカラーの有効/無効の指定方法が変わりました
・パラメータを多少指定しやすく
・描画順はどこでもよくなったかわり、MME0.24以上専用になりました

Ver.2.2
・ソースコード整理

Ver.2.1
・コア部をもう少し太く
・パラメータにUIアノテーション追加
・MMDからSiとTrである程度制御可能に
・点滅機能を搭載

Ver.2
・キーカラーが5種まで使用可能になりました
・またキーカラーの有効/無効を簡単に指定できるように
・MMD上でKeyLuminous2.xのTrの値を操作するとエフェクトのかかり方が変化するように
・コア部の境界にアンチエイリアスをかける機能を実装
・デフォルトの背景色を黒に
・機能が増えた代わり、重くなりました・・・


●パラメータ

・Key_ColorX

キーカラーを指定します
色の指定方法としては、行末の3つの数字が色のR,G,Bに対応しているので、
それぞれ 0 〜 1.0 の範囲で指定します。
すべて0(黒)にするとそのキーカラーは無効になります。

・Extent_S
・Extent_G

放射部分は2種類のぼかしの組み合わせになっており、
それぞれのぼかしの範囲を指定します
Extent_Sを大きくすると光の範囲が大きくなり、
Extent_Gを大きくすると光が薄く広がります

・Core_ColorX
・Emittion_ColorX

Core_Color がコア色で、キーカラーと置換されます
Emittion_Color で放射光の色を指定します

・Strength_A
・Strength_B

エフェクトの強度を指定するパラメータです
説明が難しいので実際に試してみてください
1〜2ぐらいが適しています

・Interval

点滅周期を設定します
単位はフレームです
0にすると点滅しません


●サンプルの試し方
・KeyLuminous.xを読み込み
・sample.xを読み込み
sample.xは元は紫色の箱で、エフェクトが有効になると橙色に光ります
キーカラー２が青になっているので、Z軸も光ります
KeyLuminous2.xの表示/非表示を切り替えてエフェクトをオン・オフできます
Si、Trの値を操作するとエフェクトのかかり方が変化します


●マテリアルのコツ

キーイングのために、アクセサリやモデルの材質を
光源に影響されずに一定の色にするには、
・キーカラーは原色を選ぶ
・Diffuse、Specular、Ambientはすべて同じに
・ToonテクスチャはToon10.bmpなどの陰影の付かないものを選ぶ
など。

また、キーカラーはなるべく画面内の他のモデルで似た色が使われていないことが
重要です


●通常の使用方法
・KeyLuminous3.xをMMDで読み込む


●注意事項
このエフェクトはポストエフェクトです。
ポストエフェクトを複数読み込んだ場合の適用順序にご注意ください。


●利用条件
いかなる利用も自由ですが、自己責任にてお願いします
